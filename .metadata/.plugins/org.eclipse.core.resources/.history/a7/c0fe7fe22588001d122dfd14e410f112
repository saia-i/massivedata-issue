

import java.io.BufferedReader;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.List;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import com.example.demo.common.Original;
import com.fasterxml.jackson.databind.MappingIterator;
import com.fasterxml.jackson.dataformat.csv.CsvMapper;
import com.fasterxml.jackson.dataformat.csv.CsvSchema;

@SpringBootApplication
public class SpringBootDockerApplication {

	public static void main(String[] args) throws IOException {
		SpringApplication.run(SpringBootDockerApplication.class, args);

		CsvMapper mapper = new CsvMapper();
		// ヘッダあり、タブ区切り
		CsvSchema schema = mapper.schemaFor(Original.class).withHeader().withColumnSeparator('\t');

		Path path = Paths.get("document/train.tsv");
		try (BufferedReader br = Files.newBufferedReader(path)) {

			MappingIterator<Original> it = mapper.readerFor(Original.class).with(schema).readValues(br);

			// TSVファイルを全行まとめて読み込む場合
			List<Original> originalList = it.readAll();
			System.out.println(originalList.get(0));
			System.out.println(originalList.get(100));

		}

	}

}
